import{r as l,Y as p,u as d,Z as g,$ as v,a0 as f,a1 as h,j as c,X as m}from"./entry.7d763737.js";import{u as y}from"./asyncData.93b2728e.js";function k(t,u){const n=l({});return p(()=>{const i=g(t),{title:s,titleTemplate:o,...r}=i;n.value={title:s,titleTemplate:o,meta:v(r)}}),d(n,u)}const I=()=>{const t=f("posts",()=>({postList:[],keyword:"",categories:[]}));return{postState:t,getPostList:async({limit:s=0}={})=>{const r=c().path.replace(/\/$/,""),{data:a}=await y(`posts-${r}`,async()=>(await m("/posts/").where({title:{$contains:[t.value.keyword]},categories:{$contains:[...t.value.categories]}}).sort({date:-1}).limit(s).find()).map(e=>({title:e.title,description:e.description,categories:e.categories,date:e.date,_path:e._path})));console.log("data",a.value),t.value.postList=a.value},setCategory:({category:s})=>{const o=h();c().path!="/posts"&&o.push("/posts");const a=t.value.categories.findIndex(e=>e===s);if(a!=-1){t.value.categories.splice(a,1);return}t.value.categories.push(s)},resetFilter:()=>{t.value.keyword="",t.value.categories=[]}}};export{I as a,k as u};
